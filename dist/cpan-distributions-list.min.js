/*! CPAN Distributions List - v0.1.0 - 2013-06-22
* https://github.com/guillaumeaubert/jquery-cpan-distributions-list
* Copyright (c) 2013 Guillaume Aubert; Licensed GPLv3 */
!function(a){a.fn.createDistributionsList=function(b){function c(b,c,e,f){var g=d.repositories[c]?d.repositories[c]:d.repository_lowercase?c.toLowerCase():c,h={distribution:c,version:e,date:f,travis_status_badge:d.travis_ci?a("<a>").attr("href","https://travis-ci.org/"+d.github_id+"/"+g).html(a("<img>").attr("src","https://travis-ci.org/"+d.github_id+"/"+g+".png?branch=master").attr("alt","Build Status")):"",coveralls_badge:d.coveralls?a("<a>").attr("href","https://coveralls.io/r/"+d.github_id+"/"+g+"?branch=master").html(a("<img>").attr("src","https://coveralls.io/repos/"+d.github_id+"/"+g+"/badge.png?branch=master").attr("alt","Coverage Status")):"",github:a("<a>").attr("href","https://github.com/"+d.github_id+"/"+g).html("GitHub"),metacpan:a("<a>").attr("href","https://metacpan.org/release/"+c).html("MetaCPAN"),cpants:a("<a>").attr("href","http://cpants.cpanauthors.org/dist/"+c).html("CPANTS")},i=d.template_row.clone();for(var j in h)i.find("."+j).html(h[j]);i.css("display",""),i.attr("id","row_"+b),i.addClass("distribution"),a("#cpan_distributions > tbody:last").append(i)}var d=a.extend({pause_id:"AUBERTG",github_id:"guillaumeaubert",coveralls:!0,travis_ci:!0,repositories:{},repository_lowercase:!1,template_row:this.find("tr.template:first")},b);a.ajax({type:"GET",async:!0,dataType:"json",url:"http://api.metacpan.org/v0/release/_search?q=author:"+d.pause_id+"%20AND%20status:latest&fields=version,distribution,date&size=100&sort=distribution",success:function(a){return"false"===a.timed_out?(alert("MetaCPAN timed out ("+a.timed_out+")!"),void 0):0===a.hits.total?(alert("MetaCPAN returned no distributions for this author!"),void 0):(a.hits.hits.forEach(function(a,b){c(b,a.fields.distribution,a.fields.version,a.fields.date)}),d.on_success&&d.on_success(a),void 0)},error:function(a){alert("Error: "+a.statusText)}})}}(jQuery);